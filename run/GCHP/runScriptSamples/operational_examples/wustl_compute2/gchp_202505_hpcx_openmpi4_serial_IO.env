#!/bin/bash

source ~/.bashrc
module purge
module use -a /rdcw/fs2/rvmartin2/Active/yuanjian.z/shared/modulefiles
module use -a /cm/shared/apps/mellanox/hpcx-v2.18.1-gcc-mlnx_ofed-redhat9-cuda12-x86_64/modulefiles

module load slurm spack
source $SPACK_ROOT/share/spack/setup-env.sh
spack env activate gchp_env_hpcx_serial
module load hpcx

ulimit -c 0                  # coredumpsize
ulimit -l unlimited          # memorylocked
ulimit -u 50000              # maxproc
ulimit -v unlimited          # vmemoryuse
ulimit -s unlimited          # stacksize
